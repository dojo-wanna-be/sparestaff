<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
<div class="admin_sub_header">
  <div>
    <%= link_to 'Backend Home', '', class: 'sub_link' %>
    &nbsp;&gt; Coupon Management
  </div>
</div>

<div class="admin_panle_body">
  <%= render partial: "layouts/admin/left_hand_navigation" %>
  <div class="admin_right_panel">
    <div class="step_heading">Create new Coupon</div>
    <div class="right_step user">
      <div class="right-panel edit_regis"><br />
        <%#= form_for(@user, url: new_admin_coupon_path(params[:id]), html: { method: :put }) do |f| %>
        <%= form_tag(admin_coupons_path, method: :post, id: 'new_form', remote: true,:action => "create")do %>
          <%#= render "devise/shared/error_messages", resource: resource %>
          <div class="listed-box">
            <div class="custom-field-box">
              <div class="custom-input-group">
                <%= label_tag :coupon_code %>
                <%= text_field_tag :coupon_code %>
              </div>

              <div class="custom-input-group">
                <%= label_tag :discount_in %>
                <%= number_field_tag :discount %>
              </div>
              <div class="custom-input-group">
                <%= label_tag :users %><!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->
                <%#= select_tag "user", options_for_select(@users.map {|user| [user.name] }),class: 'js-example-basic-multiple' %>
                <%= select_tag "users[]", options_for_select(@users.map { |user| [user.name] }), multiple: true, class: 'js-example-basic-multiple' %>
              </div>
            </div>

            <%= submit_tag "Create", class: 'continue_btn' %>
            <br>
          </div>
        <% end %>
      </div>

      <div class="main_table_container">
        <div class="csv_table">
          <div class="csv_table_row gray_bg">
            <div class="Width100Px">Coupon Id</div>
            <div class="Width100Px">Coupon Code</div>
            <div class="Width100Px">Discount</div>
            <div class="Width200Px">View Users</div>
            <div class="Width200Px">Update Assigned Users</div>
          </div>
          <div class="sort_paginate_ajax1">
            <% if @coupons.present? %>
              <% @coupons.each do |coupon| %>
                <div class="csv_table_row">
                  <div class="Width100Px"><%= coupon.id %></div>
                  <div class="Width100Px"><%= coupon.coupon_code %></div>
                  <div class="Width100Px"><%=coupon.discount%>%</div>
                  <div class="Width200Px"><%= link_to 'View Assigned Users', 'javascript:;', data: {target: "#user_details_#{coupon.id}", toggle: "modal" }%></div>
                  <div class="Width200Px"><%= link_to 'Update Assigned Users', 'javascript:;', data: {target: "#update_assigned_user_#{coupon.id}", toggle: "modal" }%></div>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- <div class="modal custom-modal" id="user_details%>">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><%#= image_tag "cross.jpg", class: 'close-img' %></button>
        </div>
        <div class="modal-body">
          <div class="main_table_container">
              <div class="">Coupons Assigned to following Users</div>
              <div class="csv_table">
                <div class="csv_table_row gray_bg">
                  <div class="Width100Px">Name</div>
                </div>
                <%# @users&.each do |user| %>
                  <#% if user.coupon.id.eql?(coupon.id) %>
                    <div class="csv_table_row">
                      <div class="Width100Px">
                        <%#= user.name %>
                      </div>
                  <%# else %>
                    <div class="">No User Assigned.</div>
                  <%# end %>
                <%#end%>
              </div>
            <%#= link_to "Log in with Facebook", user_facebook_omniauth_authorize_path, class: 'facebook-btn' %>
          </div>
        </div>
      </div>
    </div>
  </div> -->
<script type="text/javascript">
	$(document).ready(function() {
    $('js-example-basic-multiple').select2();
  });
</script>